language: java
jdk: oraclejdk8
notifications:
  email:
    on_failure: never
    on_success: never
addons:
  sonarcloud:
    organization: lapots-github
    token:
      secure: l0wvklSqSj4OMqk9edIKODL1bnj1F/T+j1qG0WJNp9c+xbzqPvQuW7CPtwBuWiJaS6W53R2fWugpskQS7CuKvsGvxQp9kpsxEUHVB1Wcy8qtif3DaZKACuu0Y6eKWbkBK8x8jwT54V+zgoaS7Wmlw6NB6bHpX6UVI/bFu/DG02BIGIhS4/iMLnBAiXpIk/bJSNtPT3Cl/bPD/oUZvVXlcpYFWH534GlbN4ib9+QuoUEhqc7V/SpQjRMVKgNZAL8ETsrMcNviVnVUt0Mm4+Hm+5+KrcfNv0DeKsEBdfimnytHF09M7JUjeRFlR8pDZkQxe/TiMd3VbI4WED6blRccNYaordFBq0TjUmL3Dizl2+lmAhtS4EXYUzyrgNzK1dtD5RhLG2l4/osx8xvSudZXS2z/9fiiUWvidF9cHpjN1IzWcX7VHrZ/H5e5hiiB+DifZ1A9XsAMmZ7uxjhZDyRL25cYJLqf3Te9Nd0vXPKK/aolDbbjWxeTJw+PtLxbOSgJWl5WC9dGJxCDC7I19mTZpFRYLrMLQItybaEZZkuP40WKHYnNSpW+/StODJZrH/xLw5sjXAYZsU9lB2qXH02uomdPklydcHRNwMs4Tz4jGC498MLOrj/gV19dcW9ufc6KGd1got/NxcQ/m4KXTpKEepI9+OdyY6l9iddSstgFIJk=
script:
- "./gradlew sonarqube --stacktrace"
after_success:
- "./gradlew jacocoTestReport coveralls"
- "./gradlew clean"
- "./gradlew zipSources"
env:
  global:
  - secure: f7z3aQK7lmPzG/rz1Cw/pSIJXzt8WAENK4auRfQg8jvnfVCeguYAOhMkSMg3/a8kcc7iRni7JbXLF63RYri98ZXoW6eaSrfsWVgMNtfaM7jDNOzThUlu59Xz5wuOgvUGIMLKHJnOvwqvv8UUoSwWoI1plCpyorPdrFLBdqNIySLunzlosKWstw1xMCxW4iwNcnVVGi1647t0pxjTG43VzUX+HeZc+QfKhv4JK1e1Gd4+dFz+Y0Pmp13r9Tz5fCLfcV+P5T3Wj4i3JK32LaBCJlUIpVbmDfp6Y5EDCh81lQCM0uPEKIzqzA95Y4MrwOm+ZQ0K925/L7x1bcwVURvXsYBRM6hUVjRfDrYFLtqUgSurb85Et6k0trg+C04Sl57ugeue2yVVwzFYfsMW5xTISxQImwYvRPZheqkGj4QiamRSS4NHGEAmAKj2D3CR41mMcluKVgYAh11lmkSBlMkaUVyNfuXzXFO8AZRD9U+SOzrBeAC6G1Gky6OfYO4hHyoUBiwq88XTdHGLUt6Ck0Oj+zHzNzR9FvE2XIS2287SGxZv1r7AuB0SZxGrKNMYYnDipV3j6D30zo3FFLmC/18SG0E1cj040mffB/sLkZ3Yfz3LAaQVehcLqZD84CTjmKHn+aaHT2TzmDq0S/oGG7PGPXvWiAx6YTCoq3cqRP4cxAA=
  - secure: U0AQrx3lhgC/0m8JV1CgMAEyZFLubtWsa3gNCpmM5Nju5Sq+XFadlaV4Muhggv//XTybfmXRaW7ty3IDFa/KhEK8cgoBxlEJEn0Cp0xS7PqIknaV+8rXmH1lsB4fkrnw0p2pvLJ4WZviOVIMmYhGUymcF4ovymIYrUgEoC2ntYB/B5X4ao/mVUFkMkMVrR5Aj8ZqeNzwvHe0SsOAEQSUM8bG13821cml53BQajm3TW+ypH8/bSO1XIwmXPdv7417DoRW4nEcCyHyZh7GM6qNP5xIn/G5BrtyGDcSTyr9yUxtaYkcTS0v3Fh8PoUODn1y5iEkwmjkTrqvPuvbvF+kZ6dQbXvB2hsqik9YnWMf1E1P72Own0vA0FM6dAQLyyr0KjHhNZCKUoAq62YtfuFRVNEiUomqWKO2L8v2H4kECL8gUSKJt2MsVXvzmu2m7hgelzw1rT4gynoTlt+wQZAOlYEmktnpKZXjHwOEdoCzgPouPDH2sO1pFDa+m0qDDKRzhS3MoVhzpHU9Uy1XPHXP75MA/ZJ5YkUTvFClDVITttlweZZUakFYtqG7c1AeHgSbBTf4cJiTckM/TeWw1Rcdxt/2+0TmKMh8QIBcAPMJcF7mlNVjF06befN0tQ+2fAELEYkYKvfSMMTcOBUstDM5yKCFGjcQTBXBWRakXSuK2SA=
deploy:
  provider: elasticbeanstalk
  access_key_id: "$aws_access_key_id"
  secret_access_key: "$aws_secret_access_key"
  region: eu-central-1
  app: judge-rule-engine
  env: judge-rule-engine-env
  bucket-name: deploy-app-bucket
  skip_cleanup: true
  zip_file: latest.zip
